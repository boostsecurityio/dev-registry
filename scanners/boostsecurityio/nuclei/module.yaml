api_version: 1.0

id: boostsecurityio/nuclei
name: nuclei
namespace: boostsecurityio/nuclei

config:
  support_diff_scan: false


steps:
  - scan:
      command:
        docker:
          image: projectdiscovery/nuclei:latest
#          command: -c 'nuclei -u $TARGET_URL -nm -irr -se /tmp/nuclei.sarif &>/dev/null; cat /tmp/nuclei.sarif'
          command: -c 'nuclei -u $TARGET_URL -nm -irr -se /tmp/nuclei.sarif; cat /tmp/nuclei.sarif'
          entrypoint: sh
          workdir: /src
          environment:
            TARGET_URL: ${TARGET_URL}
            HOME: /tmp
      format: sarif
